var documenterSearchIndex = {"docs":
[{"location":"howto/#How-To","page":"How To","title":"How-To","text":"","category":"section"},{"location":"howto/#Serve-a-REPL-from-a-remote-server","page":"How To","title":"Serve a REPL from a remote server","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"Run an ssh server on your.example.host and perform the usual ssh setup. (For example, add your public key to ~/.ssh/authorized_keys on the server.)\nYour Julia server should call serve_repl(). Use @async serve_repl() if you'd like to run other server tasks concurrently.","category":"page"},{"location":"howto/#Connect-to-a-REPL-on-a-remote-server","page":"How To","title":"Connect to a REPL on a remote server","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"Set up passwordless ssh to your server. Usually this means you have ssh-agent running with your private key loaded. If you've got some particular ssh options needed for the server, you'll find it convenient to set these up in the OpenSSH config file (~/.ssh/config on unix). For example,\nHost your.example.host\n   User ubuntu\n   IdentityFile ~/.ssh/some_identity\nStart up Julia and run the code\nusing RemoteREPL; connect_repl(\"your.example.host\");\nAlternatively use the shell wrapper script RemoteREPL/bin/julia-r:\njulia-r your.example.host","category":"page"},{"location":"howto/#Plot-variables-from-the-server","page":"How To","title":"Plot variables from the server","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"The @remote macro can be used to get variables from the server and plot them on the client with a single line of code. For example:","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"julia@your.host> x = 1:42; y = x.^2;\n\njulia> plot(@remote((x,y))...)","category":"page"},{"location":"howto/#Use-stdout-with-println/dump,-etc","page":"How To","title":"Use stdout with println/dump, etc","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"Lots of functions such as print write to the global stdout variable, but RemoteREPL doesn't capture this.","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"There's two ways to get a similar effect in RemoteREPL, both of which rely on passing an IO object explicitly to println/dump/etc.","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"One way is to use @remote(stdout) which creates a proxy of the client's stdout stream on the server which you can write to:","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"julia@localhost> dump(@remote(stdout), :(a + b))\nExpr\n  head: Symbol call\n  args: Array{Any}((3,))\n    1: Symbol +\n    2: Symbol a\n    3: Symbol b","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"Another way is to use sprint to create the IO object and wrap the returned value in a Text object for display:","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"julia@localhost> Text(sprint(dump, :(a+b)))\nExpr\n  head: Symbol call\n  args: Array{Any}((3,))\n    1: Symbol +\n    2: Symbol a\n    3: Symbol b","category":"page"},{"location":"howto/#Include-a-remote-file","page":"How To","title":"Include a remote file","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"To include a Julia source file from the client into the current module on the remote side, use the %include REPL magic:","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"julia@localhost> %include some/file.jl","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"%include has tab completion for local paths on the client.","category":"page"},{"location":"howto/#Evaluate-commands-in-another-module","page":"How To","title":"Evaluate commands in another module","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"If your server process has state in another module, you can tell RemoteREPL to evaluate all commands in that module. For example:","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"julia@localhost> module SomeMod\n                    a_variable = 1\n                 end\nMain.SomeMod\n\njulia@localhost> a_variable\nERROR: UndefVarError: a_variable not defined\n[...]\n\njulia@localhost> %module SomeMod\nEvaluating commands in module Main.SomeMod\n\njulia@localhost> a_variable\n1","category":"page"},{"location":"howto/#Use-alternatives-to-SSH","page":"How To","title":"Use alternatives to SSH","text":"","category":"section"},{"location":"howto/#AWS-Session-Manager","page":"How To","title":"AWS Session Manager","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"You can use AWS Session Manager instead of SSH to connect to remote hosts. To do this, first setup Session Manager for the EC2 instances you like. See the docs. Thereafter, install AWS CLI version 2 and then install the Session Manager plugin for AWS CLI on your local system.","category":"page"},{"location":"howto/","page":"How To","title":"How To","text":"Setup your AWS CLI by running aws configure on the command line. You can then connect to the RemoteREPL server on your EC2 instance with connect_repl(\"your-instance-id\"; tunnel=:aws, region=\"your-instance-region\"). The region argument is only required if the EC2 instance is not in the default region that your CLI was setup with.","category":"page"},{"location":"howto/#Kubernetes-kubectl","page":"How To","title":"Kubernetes kubectl","text":"","category":"section"},{"location":"howto/","page":"How To","title":"How To","text":"If kubectl is configured on your local system, you can use that to connect to RemoteREPL servers on your Kubernetes cluster. Run the following snippet: connect_repl(\"your-pod-name\"; tunnel=:k8s, namespace=\"your-namespace\"). The namespace argument is only required if the Pod is not in the default Kubernetes namespace.","category":"page"},{"location":"design/#Design","page":"Design","title":"Design","text":"","category":"section"},{"location":"design/#REPL-wire-protocol","page":"Design","title":"REPL wire protocol","text":"","category":"section"},{"location":"design/","page":"Design","title":"Design","text":"Currently RemoteREPL uses the standard Serialization library to format messages on the wire because this is simple to use.  However, this is not bidirectionally compatible between Julia versions so we'll probably move to a different message container format in the future.","category":"page"},{"location":"design/","page":"Design","title":"Design","text":"RemoteREPL formats results as text (using show(io, \"text/plain\", result)) for communication back to the client. This is helpful because:","category":"page"},{"location":"design/","page":"Design","title":"Design","text":"The result of a computation might be large, and it should be summarized before sending back. show is an excellent tool for this.\nThe remote machine may be a separate application with different modules loaded; it may not be possible to deserialize the results in the local Julia session when custom types are involved.","category":"page"},{"location":"design/#The-standard-streams","page":"Design","title":"The standard streams","text":"","category":"section"},{"location":"design/","page":"Design","title":"Design","text":"RemoteREPL doesn't interact with the standard streams stdout,stderr and stdin on the server. This avoids unexpected side effects such as interfereing with the server's normal logging and clashing with any concurrent RemoteREPL sessions.","category":"page"},{"location":"design/","page":"Design","title":"Design","text":"However this means that RemoteREPL misses out on some behavior you'd expect from the normal REPL:","category":"page"},{"location":"design/","page":"Design","title":"Design","text":"Functions like println() have side effects on the server which are not visible on the client. See the howto for how @remote(stdout) helps with this.\nInteractive utilities like Cthulhu.jl — which reads from stdin and writes to stdout — don't work.","category":"page"},{"location":"design/","page":"Design","title":"Design","text":"In future I hope to improve this situation with better stream forwarding utilities.","category":"page"},{"location":"reference/#Reference","page":"Reference","title":"Reference","text":"","category":"section"},{"location":"reference/#REPL-syntax","page":"Reference","title":"REPL syntax","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"RemoteREPL syntax is just normal Julia REPL syntax, the only minor difference is that ?expr produces help for expr, but we don't have a separate help mode for this.","category":"page"},{"location":"reference/#Security-considerations","page":"Reference","title":"Security considerations","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"Note that any logged-in users on the client or server machines can execute arbitrary commands in the serve_repl() process. For this reason, you should avoid using RemoteREPL on shared infrastructure like compute clusters if you don't trust other users on the system. (In the future perhaps we can avoid this by forwarding between socket files?)","category":"page"},{"location":"reference/","page":"Reference","title":"Reference","text":"This package uses an SSH tunnel by default to forward traffic when host != Sockets.localhost, so it should be quite secure to use over an open network. If both client and server are on a secure network, it's possible to skip the tunnel to avoid setting up SSH. However, if anyone breaks into your network you'll be left with no security whatsoever.","category":"page"},{"location":"reference/","page":"Reference","title":"Reference","text":"TLDR; this package aims to provide safe defaults for single-user machines. However, do not expose the RemoteREPL port to an open network. Abitrary remote code execution is the main feature provided by this package!","category":"page"},{"location":"reference/#Interrupting-remote-evaluation","page":"Reference","title":"Interrupting remote evaluation","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"When the RemoteREPL client is waiting on a response, it will catch InterruptException and forward it to the server as an interruption message. This allows blocking operations such as IO to be interrupted safely.","category":"page"},{"location":"reference/","page":"Reference","title":"Reference","text":"However, this doesn't work for non-yielding operations such as tight computational loops. For these cases, pressing Control-C three times will disconnect from the server, leaving the remote operation still running.","category":"page"},{"location":"reference/#API-reference","page":"Reference","title":"API reference","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"connect_repl\nserve_repl\nconnect_remote\nRemoteREPL.@remote\nRemoteREPL.remote_eval","category":"page"},{"location":"reference/#RemoteREPL.connect_repl","page":"Reference","title":"RemoteREPL.connect_repl","text":"connect_repl([host=localhost,] port::Integer=27754;\n             use_ssh_tunnel = (host != localhost) ? :ssh : :none,\n             ssh_opts = ``, repl=Base.active_repl)\n\nConnect client REPL to a remote host on port. This is then accessible as a remote sub-repl of the current Julia session.\n\nFor security, connect_repl() uses an ssh tunnel for remote hosts. This means that host needs to be running an ssh server and you need ssh credentials set up for use on that host. For secure networks this can be disabled by setting tunnel=:none.\n\nTo provide extra options to SSH, you may pass a Cmd object in the ssh_opts keyword, for example an identity file may be set with ssh_opts = `-i /path/to/identity.pem`. For a more permanent solution, add a Host section to your ssh config file.\n\nYou can also use the following technologies for tunneling in place of SSH:\n\nAWS Session Manager: set tunnel=:aws. The optional region keyword argument can be used to specify the AWS Region of your server.\nkubectl: set tunnel=:k8s. The optional namespace keyword argument can be used to specify the namespace of your Kubernetes resource.\n\nSee README.md for more information.\n\n\n\n\n\n","category":"function"},{"location":"reference/#RemoteREPL.serve_repl","page":"Reference","title":"RemoteREPL.serve_repl","text":"serve_repl([address=Sockets.localhost,] port=27754; [on_client_connect=nothing])\nserve_repl(server)\n\nStart a REPL server listening on interface address and port. In normal operation serve_repl() serves REPL clients indefinitely (ie., it does not return), so you will generally want to launch it using @async serve_repl() to do other useful work at the same time.\n\nThe hook on_client_connect may be supplied to modify the ServerSideSession for a client after each client connects. This can be used to define the default module in which the client evaluates commands.\n\nIf you want to be able to stop the server you can pass an already-listening server object (the result of Sockets.listen()). The server can then be cancelled from another task using close(server) as necessary to control the server lifetime.\n\nSecurity\n\nserve_repl() uses an unauthenticated, unecrypted protocol so it should not be used on open networks or multi-user machines where other users aren't trusted. For open networks, use the default address=Sockets.localhost and the automatic ssh tunnel support provided by the client-side connect_repl().\n\n\n\n\n\n","category":"function"},{"location":"reference/#RemoteREPL.connect_remote","page":"Reference","title":"RemoteREPL.connect_remote","text":"connect_remote([host=localhost,] port::Integer=27754;\n             tunnel = (host != localhost) ? :ssh : :none,\n             ssh_opts = ``)\n\nConnect to remote server without any REPL integrations. This will allow you to use @remote, but not the REPL mode. Useful in circumstances where no REPL is available, but interactivity is desired like Jupyter or Pluto notebooks. Otherwise, see connect_repl.\n\n\n\n\n\n","category":"function"},{"location":"reference/#RemoteREPL.@remote","page":"Reference","title":"RemoteREPL.@remote","text":"@remote ex\n\nExecute expression ex on the other side of the current RemoteREPL connection and return the value.\n\nThis can be used in both directions:\n\nFrom the normal julia> prompt, execute ex on the remote server and return the value to the client.\nFrom a remote prompt, execute ex on the client and push the resulting value to the remote server.\n\nExamples\n\nPush a value from the client to the server:\n\njulia> client_val = 1:100;\n\njulia@localhost> server_val = @remote client_val\n1:100\n\nFetch a pair of variables (x,y) from the server, and plot them on the client with a single line:\n\n# In two lines\njulia> x,y = @remote (x, y)\n       plot(x, y)\n\n# Or as a single expression\njulia> plot(@remote((x, y))...)\n\n\n\n\n\n","category":"macro"},{"location":"reference/#RemoteREPL.remote_eval","page":"Reference","title":"RemoteREPL.remote_eval","text":"remote_eval(cmdstr)\nremote_eval(host, port, cmdstr)\n\nParse a string cmdstr, evaluate it in the remote REPL server's Main module, then close the connection. Returns the result which the REPL would normally pass to show() (likely a Text object).\n\nFor example, to cause the remote Julia instance to exit, you could use\n\nusing RemoteREPL\nRemoteREPL.remote_eval(\"exit()\")\n\n\n\n\n\n","category":"function"},{"location":"#RemoteREPL.jl","page":"Overview","title":"RemoteREPL.jl","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"RemoteREPL allows you to connect your local julia REPL to a separate Julia process and run commands interactively:","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"Run code in the Main module of a remote Julia process\nStandard REPL tab completion and help mode with ?\nTransfer variables between processes with @remote\nAutomatic ssh tunnel for network security. Reconnects dropped connections.","category":"page"},{"location":"#Demo","page":"Overview","title":"Demo","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"(Image: asciicast)","category":"page"},{"location":"tutorial/#Connecting-two-Julia-processes","page":"Tutorial","title":"Connecting two Julia processes","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Let's connect two separate Julia processes on the same machine. First start up a REPL server in process A. This will allow any number of external clients to connect:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"julia> using RemoteREPL\n\njulia> @async serve_repl()","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Now start a separate Julia session B, connect to process A and execute some command:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"julia> using RemoteREPL\n\njulia> connect_repl();\nREPL mode remote_repl initialized. Press > to enter and backspace to exit.\n\njulia@localhost> x = 123\n123","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Back in the REPL of process A you'll now see that a client has connected, and the variable x has been set in the Main module:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"┌ Info: REPL client opened a connection\n└   peer = (ip\"127.0.0.1\", 0xa68e)\n\njulia> x\n123","category":"page"},{"location":"tutorial/#Transferring-variables","page":"Tutorial","title":"Transferring variables","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Normally RemoteREPL shows you a string-based summary of variables, but the actual Julia values are held in the remote process. Sometimes it's useful to transfer these to the client to make use of graphical utilities like plotting or other resources which you need a local copy of the object for. This can be done with the RemoteREPL @remote macro which executes an expression on the \"other side\" of the current remote connection.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Transfer the value from a variable x on the client to the variable y on the server:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"julia> x = [1,2];\n\njulia@localhost> y = @remote(x)\n2-element Vector{Int64}:\n 1\n 2","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Transfer arrays x and y from the server and plot them on the client:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"julia@localhost> x = 1:42; y = x.^2;\n\njulia> a, b = @remote (x,y)\n       plot(a, b)","category":"page"}]
}
